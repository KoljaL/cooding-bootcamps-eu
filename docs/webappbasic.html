<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="img/favicon-dark.png" rel="icon" />
  <script>
    document.documentElement.setAttribute('data-theme', window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
  </script>
  <title>Web App Basic</title>
  <script>

  </script>

  <link rel="stylesheet" href="./css/almostclassless.css">
  <link rel="stylesheet" href="./css/layout.css">
  <style>
    .passwordToggle form {
      display: grid;
      grid-template-columns: 250px 100px;
      grid-template-areas:
        "password password"
        "toggle toggle";
      gap: .5rem;
    }


    .fastcheapgood form {
      display: grid;
      grid-template-columns: 2rem 1fr;
      gap: 1rem;
      align-items: center;
      font-size: 1.2rem;
    }

    .fastcheapgood label {
      cursor: pointer;
    }

    .counter {
      position: relative;
    }

    .counterBackground {
      width: 100%;
      height: 100px;
      border: 3px solid var(--primary);
      border-radius: 1rem;
      position: relative;
      cursor: pointer;
    }

    .counterBackgroundWidth {
      position: absolute;
      background: black;
      top: 0;
      bottom: 0;
      left: 0;
      width: 0%;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: .9rem;
      /* border-top-left-radius: .9rem;
      border-bottom-left-radius: .9rem; */
      z-index: -1;
    }

    .counterValue {
      font-size: 3rem;
      height: 3rem;
      color: var(--primaryHI);
      z-index: 10;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
      -webkit-user-select: none;
      /* Safari */
      -ms-user-select: none;
      /* IE 10 and IE 11 */
      user-select: none;
      /* Standard syntax */
    }

    .randomColor,
    .counterReset {
      position: absolute;
      top: 0;
      right: 0;
    }

    .colorSlider {
      position: relative;
    }

    .colorPreview {
      width: 100%;
      height: 100px;
      border: 3px solid var(--primary);
      border-radius: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: none;
      margin-bottom: 2rem;
    }

    .colorSlider form {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      padding-inline: 1.5rem;
      gap: 1rem;
      position: relative;
      flex-wrap: wrap;
    }

    .colorSlider form>div {
      display: flex;
      flex-direction: column;
      justify-content: start;
      align-items: center;
      gap: 1rem;
      position: relative;
    }

    .colorSlider form>div>span {
      position: absolute;
      left: 0;
      bottom: 2.5rem;
      width: 30px;
      text-align: center;
    }

    .colorName {
      font-size: 1.5rem;
      font-weight: 600;
      transition: none;

      /* text-shadow: 0 0 2px #000; */
    }

    /* http://danielstern.ca/range.css */


    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      background: transparent;
      height: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border-color);

    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
    }

    input[type=range]:focus {
      outline: none;
      border: none;
    }

    input[type=range]::-ms-track {
      width: 100%;
      cursor: pointer;
      background: transparent;
      border-color: transparent;
      color: transparent;
    }


    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      border: 1px solid #000000;
      height: 36px;
      width: 16px;
      border-radius: 3px;
      background: var(--primary);
      cursor: pointer;
      /* margin-top: -14px; */
      box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    }

    input[type=range]::-moz-range-thumb {
      border: 2px solid var(--border-color);
      height: 36px;
      width: 16px;
      border-radius: 3px;
      background: var(--primary);
      box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
      cursor: pointer;
    }

    input[type=range].red {
      background: hsl(0, 100%, 40%);
    }

    input[type=range].green {
      background: hsl(120, 100%, 25%);
    }

    input[type=range].blue {
      background: hsl(240, 100%, 40%);
    }

    /* CLOCK */
    .clockBackground {
      width: 500px;
      height: 500px;
      margin-inline: auto;
      border: 2px solid var(--primary-darker);
      border-radius: 50%;
      position: relative;
      background: radial-gradient(var(--secondary-bg), var(--secondary-bg1));
      /* scale: .6; */
      /* scale: max(0.8, 100%); */
    }

    /* screen smaller then 500 px media query */
    @media screen and (max-width: 500px) {
      .clockBackground {
        scale: 0.6;
      }
    }

    .clockBackground>div {
      position: absolute;
      top: 50%;
      border-radius: 50%;
      display: none;
    }

    .hour {
      background: var(--primary);
      width: 200px;
      height: 6px;
      top: calc(50% - 3px) !important;
      left: calc(50% - 100px);
    }

    .minute {
      background: var(--primary);
      width: 220px;
      height: 4px;
      top: calc(50% - 2px) !important;
      left: calc(50% - 110px);
      z-index: 5;
    }

    .second {
      background: var(--primary);
      width: 240px;
      height: 2px;
      top: calc(50% - 1px) !important;
      left: calc(50% - 120px);
      z-index: 5;
    }

    .centerdot {
      background: var(--primary);
      width: 6px;
      height: 6px;
      border: 1px solid var(--primary);
      top: calc(50% - 3px) !important;
      left: calc(50% - 3px);
      z-index: 5;
    }

    .digitalClock {
      font-size: 3rem;
      font-weight: 600;
      color: var(--primary-lighter);
      transform: translateX(125px) translateY(80px);
    }

    #runfastButton {
      appearance: button;
      background-color: var(--primary);
      border: 1px solid transparent;
      border-radius: var(--border-radius-large);
      color: var(--primary-bg);
      cursor: pointer;
      font-size: 1rem;
      padding: .75rem .75rem .65rem .75rem;
      position: relative;
    }

    #runfastButton,
    button {
      font-variant: small-caps;
      font-weight: 600 !important;
      font-size: 1rem;
      color: var(--secondary)
    }

    #runfastButton:hover {
      background-color: var(--primary-light);
      border: 1px solid transparent;
    }

    #runfast:checked+label:after {
      position: absolute;
      right: -2rem;
      bottom: .3rem;
      content: " ";
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' viewBox='0 0 24 24' stroke-width='2.5' stroke='green'><path stroke-linecap='round' stroke-linejoin='round' d='M4.5 12.75l6 6 9-13.5' /></svg>");
      background-size: cover;
      background-repeat: no-repeat;
      width: 2rem;
      height: 2rem;
      display: inline-block;
    }

    p.description {
      padding-top: 1rem;
      margin: 0;
    }
  </style>
</head>

<body>

  <header>
    <h1>Web Apps Foundation</h1>
    <span class="icons">

      <label class="theme-toggle" title="Toggle theme"></label>
    </span>
  </header>


  <section class="passwordToggle">
    <h2>Password toggle</h2>
    <form>
      <label for="password">Password</label>
      <br>
      <input type="password" id="password" name="password" value="top secret">
      <button type="button" id="toggle" onclick="togglePassword()">Show</button>
    </form>
    <p class="description">
      Just a simple toggle switch between <code>&lt;input type=&quot;password&quot;&gt;</code> and <code>&lt;input type=&quot;password&quot;&gt;</code>.
    </p>
  </section>

  <section class="fastcheapgood">
    <h2>fast cheap good</h2>
    <form autocomplete="off">
      <input type="checkbox" id="fast" class="slider">
      <label for="fast">Fast</label>
      <input type="checkbox" id="cheap" class="slider">
      <label for="cheap">Cheap</label>
      <input type="checkbox" id="good" class="slider">
      <label for="good">Good</label>
    </form>
    <p class="description">
      It is impossible to have all three of these things at the same time. If you want something to be fast, it will not be cheap. If you want something to be cheap, it will not be good. If you want something to be good, it will not be fast.
    </p>
  </section>

  <section class="counter">
    <h2>Counter</h2>
    <button class="counterReset">Reset</button>
    <div class="counterBackground">
      <div class="counterValue">click here</div>
      <div class="counterBackgroundWidth"></div>
    </div>
    <p class="description">
      A simple counter that counts up to 100 and then resets. The background color changes from green to red as the counter increases.
      The countdown time is always one second, regardless of the state of the counter.
      You can use your keyboard to increase the counter by pressing the <kbd>spacebar</kbd> or <kbd>enter</kbd>, <kbd>backspace</kbd> for decrease anr <kbd>R</kbd> for reset.
    </p>
  </section>

  <section class="colorSlider">
    <h2>Color Slider</h2>
    <button class="randomColor">Random</button>
    <div class="colorPreview">
      <span class="colorName">#000000</span>
    </div>
    <br>
    <form autocomplete="off">
      <div>
        <span class="redValue">186</span>
        <input type="range" min="0" max="255" value="186" class="red">
      </div>
      <div>
        <span class="greenValue">218</span>
        <input type="range" min="0" max="255" value="218" class="green">
      </div>
      <div>
        <span class="blueValue">85</span>
        <input type="range" min="0" max="255" value="85" class="blue">
      </div>
    </form>
    <p class="description">
      A simple RGB-color slider for that changes the background color of the element above. The random colors are taken from an array.
    </p>
  </section>


  <section class="clock">
    <h2>Clock</h2>
    <div class="clockBackground">
      <div class="hour"></div>
      <div class="minute"></div>
      <div class="second"></div>
      <div class="centerdot"></div>
      <div class="digitalClock">
        <span class="digitalClockHour">00</span> :
        <span class="digitalClockMinute">00</span> :
        <span class="digitalClockSecond">00</span>
      </div>
    </div>
    <p>
      <input type="checkbox" id="runfast" style="display:none" autocomplete="off">
      <label id=runfastButton for="runfast">Runfast</label>
    </p>
    <p class="description">
      The clock has a fixed size and is downscaled from a window width of less than 500px. <kbd>Runfast</kbd> increases the speed by 120 times.
    </p>
  </section>


  <div class="spacer"></div>
  <footer>
    <p>
      <a target="_blank" class="sourceCode" href="https://github.com/KoljaL/cooding-bootcamps-eu/blob/master/docs/webappbasic.html">Source Code on GitHub</a>
    </p>
  </footer>


  <!-- END OF HTML -->
  <script src="./js/toggleTheme.js"></script>
  <script src="./js/clock-speedup.js"></script>
  <script>

    //
    // CLOCK
    //  
    // define elements
    const clockHour = document.querySelector('.hour');
    const clockMinute = document.querySelector('.minute');
    const clockSecond = document.querySelector('.second');
    const digitalClock = document.querySelector('.digitalClock');
    const digitalClockHour = document.querySelector('.digitalClockHour');
    const digitalClockMinute = document.querySelector('.digitalClockMinute');
    const digitalClockSecond = document.querySelector('.digitalClockSecond');
    const runfast = document.querySelector('#runfast');

    runfast.addEventListener('change', function () {
      if (this.checked) {
        clearInterval(clockInterval);
        clockInterval = setInterval(clockFunction, 1000 / 60);
      } else {
        clearInterval(clockInterval);
        clockInterval = setInterval(clockFunction, 1000);
      }
    });
    clockInterval = setInterval(clockFunction, 1000);


    function getDate() {
      if (runfast.checked) {
        return new fastDate();
      } else {
        return new Date();
      }
    }
    // define clock function
    function clockFunction() {
      const now = getDate();
      const seconds = now.getSeconds();
      digitalClockSecond.textContent = seconds < 10 ? `0${seconds}` : seconds;
      const secondsDegrees = ((seconds / 60) * 360) + 90;
      clockSecond.style.transform = `rotate(${secondsDegrees}deg) translateX(-120px)`;
      const minutes = now.getMinutes();
      digitalClockMinute.textContent = minutes < 10 ? `0${minutes}` : minutes;
      const minutesDegrees = ((minutes / 60) * 360) + 90;
      clockMinute.style.transform = `rotate(${minutesDegrees}deg) translateX(-110px)`;
      const hours = now.getHours();
      digitalClockHour.textContent = hours < 10 ? `0${hours}` : hours;
      const hoursDegrees = ((hours / 12) * 360) + 90;
      clockHour.style.transform = `rotate(${hoursDegrees}deg) translateX(-100px)`;
    }
    // run clock function every second
    // setInterval(clockFunction, 200);
    // show clock elements after page load
    setTimeout(() => {
      clockHour.style.display = 'block';
      clockMinute.style.display = 'block';
      clockSecond.style.display = 'block';
      digitalClock.style.display = 'block';
    }, 1000);




    //
    // TOGGLE PASSWORD
    //
    // define elements
    const password = document.getElementById('password');
    const toggle = document.getElementById('toggle');
    //
    // toggle password visibility
    //
    function togglePassword() {
      if (password.type === 'password') {
        password.type = 'text';
        toggle.textContent = 'Hide';
      } else {
        password.type = 'password';
        toggle.textContent = 'Show';
      }
    }


    //
    // FAST CHEAP GOOD
    //
    // define checkboxes
    const checkboxesFastCheapGood = document.querySelectorAll('.fastcheapgood input[type="checkbox"]');
    // add event listener to all checkboxes
    checkboxesFastCheapGood.forEach(checkbox => checkbox.addEventListener('click', checkFastCheapGood));
    // define last checkbox
    var lastCheckbox;
    //
    // check if all checkboxes are checked
    //
    function checkFastCheapGood() {
      let allChecked = true;
      checkboxesFastCheapGood.forEach(checkbox => {
        if (checkbox.checked === false) {
          allChecked = false;
        }
      });
      if (allChecked) {
        lastCheckbox.checked = false;
      }
      lastCheckbox = this;
    }

    //
    // COUNTER
    //
    // define elements
    const counterBackground = document.querySelector('.counterBackground');
    const counterBackgroundWidth = document.querySelector('.counterBackgroundWidth');

    const resetButton = document.querySelector('.counterReset');
    const counterValue = document.querySelector('.counterValue');
    var counter = 0;
    // counterValue.textContent = counter;
    // counterBackgroundWidth.style.width = counter + '%';

    // add eventListener
    counterBackground.addEventListener('click', incrementCounter);
    resetButton.addEventListener('click', resetCounter);

    document.addEventListener("keydown", function (event) {
      if (event.key === " " || event.key === "Spacebar" || event.key === "Enter") {
        incrementCounter();
      }
      if (event.key === "r" || event.key === "R") {
        resetCounter();
      }
      if (event.key === "Backspace") {
        incrementCounter('down');
      }

    });

    //
    // increment counter
    //
    function incrementCounter(direction = 'up') {
      if (counter >= 100) {
        resetCounter();
        return;
      }
      if (direction === 'down') {
        counter--;
        if (counter <= 0) {
          counter = 0;
        }
      } else {
        if (counter < 0) {
          counter = 0;
        }
        counter++;
      }
      counterValue.textContent = counter;
      counterBackground.style.borderColor = 'var(--primary-dark)';
      setTimeout(() => {
        counterBackground.style.borderColor = 'var(--primary)';
      }, 100);
      setBackgrounWidth()
    }
    //
    // reset counter
    //
    function resetCounter() {
      let inervallTime = 1000 / counter;
      var counterInterval = setInterval(() => {
        if (counter >= 0) {
          setBackgrounWidth()
          counterValue.innerHTML = counter--;
        } else {
          clearInterval(counterInterval);
        }
        // console.log(counter)
        // TODO 
        // runs til -1 and i dont know why
        // dirty hack to fix it in incrementCounter() -> if (counter <= 0) { counter = 0; }
      }, inervallTime);
    }

    //
    // set background color & width for counter progress
    //
    function setBackgrounWidth() {
      counterBackgroundWidth.style.width = counter + '%';
      counterBackgroundWidth.style.background = `hsl(${100 - counter}, 100%, 50%)`
    }

    //
    // COLOR SLIDER
    //
    // define inputs for color Slider
    const red = document.querySelector('input.red');
    const green = document.querySelector('input.green');
    const blue = document.querySelector('input.blue');
    const redValue = document.querySelector('.redValue');
    const greenValue = document.querySelector('.greenValue');
    const blueValue = document.querySelector('.blueValue');
    const randomColorButton = document.querySelector('.randomColor');
    const colorName = document.querySelector('.colorName');
    const colorPreview = document.querySelector('.colorPreview');
    const rgbArray = [[176, 0, 181], [186, 218, 85], [255, 187, 17], [112, 112, 32], [29, 16, 117], [32, 128, 117], [250, 122, 85], [204, 85, 85], [30, 42, 45], [102, 0, 221], [170, 204, 238], [90, 23, 237], [89, 162, 122], [34, 51, 221], [240, 11, 66], [76, 195, 85], [145, 42, 126], [145, 85, 61], [202, 34, 7], [92, 161, 229], [34, 238, 221], [195, 23, 28], [116, 119, 0], [171, 172, 171], [102, 51, 153], [222, 30, 126], [250, 17, 61]];
    // add eventListener
    red.addEventListener('input', setColor);
    green.addEventListener('input', setColor);
    blue.addEventListener('input', setColor);
    randomColorButton.addEventListener('click', () => {
      randomColor();
      setColor();
    });


    // run on startup
    randomColor()
    setColor()

    //
    // set color
    //
    function setColor() {
      colorPreview.style.background = `rgb(${red.value}, ${green.value}, ${blue.value})`;
      colorName.textContent = rgbToHex(red.value, green.value, blue.value);
      colorName.style.color = `rgb(${255 - red.value}, ${255 - green.value}, ${255 - blue.value})`;
      redValue.textContent = red.value;
      redValue.style.left = `${red.value / 255 * 224 - 5}px`;
      greenValue.textContent = green.value;
      greenValue.style.left = `${green.value / 255 * 224 - 5}px`;
      blueValue.textContent = blue.value;
      blueValue.style.left = `${blue.value / 255 * 224 - 5}px`;
    }

    //
    // convert rgb to hex
    //
    function rgbToHex(r, g, b) {
      const hex = (r, g, b) => '#' + [r, g, b].map(x => {
        const hex = parseInt(x).toString(16)
        return hex.length === 1 ? '0' + hex : hex
      }).join('').toUpperCase();
      return hex(r, g, b)
    }

    //
    // set random color 
    //
    function randomColor() {
      let oldred = red.value;
      let oldgreen = green.value;
      let oldblue = blue.value;
      let idx = Math.floor(Math.random() * rgbArray.length);
      let newred = rgbArray[idx][0];
      let newgreen = rgbArray[idx][1];
      let newblue = rgbArray[idx][2];
      const intervalTime = 5;

      var counterBlue_1 = setInterval(() => {
        if (oldblue < newblue) {
          blue.value = oldblue++;
          setColor();
        } else if (oldblue > newblue) {
          blue.value = oldblue--;
          setColor();
        } else {
          clearInterval(counterBlue_1);
        }
      }, intervalTime);

      var counterGreen_1 = setInterval(() => {
        if (oldgreen < newgreen) {
          green.value = oldgreen++;
          setColor();
        } else if (oldgreen > newgreen) {
          green.value = oldgreen--;
          setColor();
        } else {
          clearInterval(counterGreen_1);
        }
      }, intervalTime);

      var counterRed_1 = setInterval(() => {
        if (oldred < newred) {
          red.value = oldred++;
          setColor();
        } else if (oldred > newred) {
          red.value = oldred--;
          setColor();
        } else {
          clearInterval(counterRed_1);
        }
      }, intervalTime);


    }
    // function randomColor() {
    //   let idx = Math.floor(Math.random() * rgbArray.length);
    //   red.value = rgbArray[idx][0];
    //   green.value = rgbArray[idx][1];
    //   blue.value = rgbArray[idx][2];
    //   console.log(`${red.value}, ${green.value}, ${blue.value}`)
    // }
  </script>
  <script src="./js/menu.js"></script>

</body>

</html>