<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="img/favicon-dark.png" rel="icon" />
  <script>
    document.documentElement.setAttribute('data-theme', window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light')
  </script>
  <title>toggle Password</title>
  <script>

  </script>

  <link rel="stylesheet" href="./css/almostclassless.css">
  <style>
    @font-face {
      font-family: Overpass-Light;
      src: url('./font/Overpass-Light.woff2') format('woff2');
    }

    @font-face {
      font-family: Overpass-Regular;
      src: url('./font/Overpass-Medium.woff2') format('woff2');
    }

    :root {
      --header-height: 3.5rem;
    }

    * {
      box-sizing: border-box;
      -ms-overflow-style: none;
      scrollbar-width: none;
      transition: color 0.5s, background-color 0.5s;
    }

    ::-webkit-scrollbar {
      display: none;
    }

    body {
      max-width: 1024px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    header {
      position: sticky;
      top: 0;
      height: var(--header-height);
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: baseline;
      gap: 1rem;
      padding-inline: 1rem;
      background-color: var(--secondary-bg);
      border-bottom: 1px solid var(--secondary);
      z-index: 5;
    }

    header h1 {
      margin: .5rem 0 0;
    }

    h2 {
      margin-top: 6rem;
    }

    header label svg {
      width: 2.5rem;
      height: 2.5rem;
      position: relative;
      top: .5rem;
      filter: hue-rotate(var(--primaryHI)) saturate(40%) brightness(120%);
      transition: all var(--theme-toggle__classic--duration) ease;
    }

    header label svg:hover {
      filter: hue-rotate(var(--primaryHI)) saturate(40%) brightness(150%);
    }

    .spacer {
      height: 100px;
    }

    footer {
      position: fixed;
      bottom: 0;
      width: max-content;
    }

    .fastcheapgood form {
      display: grid;
      grid-template-columns: 1rem 1fr;
      gap: 1rem;
    }


    .counter {
      position: relative;
    }

    .counterBackground {
      width: 100%;
      height: 100px;
      border: 3px solid var(--primary);
      border-radius: 1rem;
      position: relative;
    }

    .counterBackgroundWidth {
      position: absolute;
      background: black;
      top: 0;
      bottom: 0;
      left: 0;
      width: 0%;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: .9rem;
      /* border-top-left-radius: .9rem;
      border-bottom-left-radius: .9rem; */
      z-index: -1;
    }

    .counterValue {
      font-size: 3rem;
      height: 3rem;
      color: var(--primaryHI);
      z-index: 10;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
    }

    .counterReset {
      position: absolute;
      top: 0;
      right: 0;
    }

    .colorPreview {
      width: 100%;
      height: 100px;
      border: 3px solid var(--primary);
      border-radius: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: none;
    }

    .colorSlider form {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      padding-inline: 1.5rem;
      gap: 1rem;
    }

    .colorName {
      font-size: 1.5rem;
      font-weight: 600;
      transition: none;

      /* text-shadow: 0 0 2px #000; */
    }

    /* http://danielstern.ca/range.css */


    input[type=range] {
      -webkit-appearance: none;
      width: 100%;
      background: transparent;
      height: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border-color);

    }

    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
    }

    input[type=range]:focus {
      outline: none;
      border: none;
    }

    input[type=range]::-ms-track {
      width: 100%;
      cursor: pointer;
      background: transparent;
      border-color: transparent;
      color: transparent;
    }


    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      border: 1px solid #000000;
      height: 36px;
      width: 16px;
      border-radius: 3px;
      background: var(--primary);
      cursor: pointer;
      margin-top: -14px;
      box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
    }

    input[type=range]::-moz-range-thumb {
      box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
      border: 2px solid var(--border-color);
      height: 36px;
      width: 16px;
      border-radius: 3px;
      background: var(--primary);
      cursor: pointer;
    }

    input[type=range].red {
      background: hsl(0, 100%, 40%);
    }

    input[type=range].green {
      background: hsl(120, 100%, 25%);
    }

    input[type=range].blue {
      background: hsl(240, 100%, 40%);
    }

    /* CLOCK */
    .clockBackground {
      width: 500px;
      height: 500px;
      margin-inline: auto;
      border: 2px solid var(--primary);
      border-radius: 50%;
      position: relative;
    }

    .clockBackground>div {
      position: absolute;
      top: 50%;
      border-radius: 50%;
      display: none;
    }

    .hour {
      background: var(--primary);
      width: 200px;
      height: 6px;
      top: calc(50% - 3px) !important;
      left: calc(50% - 100px);
    }

    .minute {
      background: var(--primary);
      width: 220px;
      height: 4px;
      top: calc(50% - 2px) !important;
      left: calc(50% - 110px);
    }

    .second {
      background: var(--primary);
      width: 240px;
      height: 2px;
      top: calc(50% - 1px) !important;
      left: calc(50% - 120px);
    }

    .centerdot {
      background: var(--primary);
      width: 6px;
      height: 6px;
      border: 1px solid var(--primary);
      top: calc(50% - 3px) !important;
      left: calc(50% - 3px);
    }

    #runfast+label {
      color: var(--primary);
      cursor: pointer;
      font-size: 1.5rem;
      position: relative;
    }

    #runfast:checked+label:after {
      position: absolute;
      right: -2rem;
      bottom: .3rem;
      content: " ";
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' viewBox='0 0 24 24' stroke-width='2.5' stroke='green'><path stroke-linecap='round' stroke-linejoin='round' d='M4.5 12.75l6 6 9-13.5' /></svg>");
      background-size: cover;
      background-repeat: no-repeat;
      width: 2rem;
      height: 2rem;
      display: inline-block;
    }
  </style>
</head>

<body>

  <header>
    <h1>Web Apps Foundation</h1>
    <span class="icons">
      <label class="theme-toggle" title="Toggle theme"></label>
    </span>
  </header>


  <section>
    <h2>Password toggle</h2>
    <form>
      <label for="password">Password</label>
      <br>
      <input type="password" id="password" name="password" value="top secret">
      <button type="button" id="toggle" onclick="togglePassword()">Show</button>
    </form>
  </section>

  <section class="fastcheapgood">
    <h2>fast cheap good</h2>
    <form autocomplete="off">
      <input type="checkbox" id="fast" name="fast" value="fast">
      <label for="fast">Fast</label>
      <input type="checkbox" id="cheap" name="cheap" value="cheap">
      <label for="cheap">Cheap</label>
      <input type="checkbox" id="good" name="good" value="good">
      <label for="good">Good</label>
    </form>
  </section>

  <section class="counter">
    <h2>Counter</h2>
    <button class="counterReset">reset</button>
    <div class="counterBackground">
      <div class="counterValue">0</div>
      <div class="counterBackgroundWidth"></div>
    </div>
  </section>

  <section class="colorSlider">
    <h2>Color Slider</h2>
    <form autocomplete="off">
      <input type="range" min="0" max="255" value="30" class="red">
      <input type="range" min="0" max="255" value="144" class="green">
      <input type="range" min="0" max="255" value="255" class="blue">
    </form>
    <div class="colorPreview">
      <span class="colorName">#000000</span>
    </div>
  </section>


  <section class="clock">
    <h2>Clock</h2>
    <div class="clockBackground">
      <div class="hour"></div>
      <div class="minute"></div>
      <div class="second"></div>
      <div class="centerdot"></div>
    </div>

    <input type="checkbox" id="runfast" style="display:none" autocomplete="off">
    <label for="runfast">runfast</label>

  </section>


  <div class="spacer"></div>
  <footer>
    <p>
      <a target="_blank" class="sourceCode" href="https://github.com/KoljaL/cooding-bootcamps-eu/blob/master/docs/togglePassword.html">Source Code on GitHub</a>
    </p>
  </footer>


  <!-- END OF HTML -->
  <script src="./js/toggleTheme.js"></script>
  <script src="./js/clock-speedup.js"></script>
  <script>

    //
    // CLOCK
    //  
    // define elements
    const clockHour = document.querySelector('.hour');
    const clockMinute = document.querySelector('.minute');
    const clockSecond = document.querySelector('.second');
    const runfast = document.querySelector('#runfast');

    runfast.addEventListener('change', function () {
      if (this.checked) {
        clearInterval(clockInterval);
        clockInterval = setInterval(clockFunction, 1000 / 60);
      } else {
        clearInterval(clockInterval);
        clockInterval = setInterval(clockFunction, 1000);
      }
    });
    clockInterval = setInterval(clockFunction, 1000);


    function getDate() {
      if (runfast.checked) {
        return new fastDate();
      } else {
        return new Date();
      }
    }
    // define clock function
    function clockFunction() {
      const now = getDate();
      const seconds = now.getSeconds();
      const secondsDegrees = ((seconds / 60) * 360) + 90;
      clockSecond.style.transform = `rotate(${secondsDegrees}deg) translateX(-120px)`;
      const minutes = now.getMinutes();
      const minutesDegrees = ((minutes / 60) * 360) + 90;
      clockMinute.style.transform = `rotate(${minutesDegrees}deg) translateX(-110px)`;
      const hours = now.getHours();
      const hoursDegrees = ((hours / 12) * 360) + 90;
      clockHour.style.transform = `rotate(${hoursDegrees}deg) translateX(-100px)`;
    }
    // run clock function every second
    // setInterval(clockFunction, 200);
    // show clock elements after page load
    setTimeout(() => {
      clockHour.style.display = 'block';
      clockMinute.style.display = 'block';
      clockSecond.style.display = 'block';
    }, 1000);


    // setInterval(function () {
    //   var li = new Date().toString();
    //   console.log(li)
    // }, 1000);




    //
    // TOGGLE PASSWORD
    //
    // define elements
    const password = document.getElementById('password');
    const toggle = document.getElementById('toggle');
    //
    // toggle password visibility
    //
    function togglePassword() {
      if (password.type === 'password') {
        password.type = 'text';
        toggle.textContent = 'Hide';
      } else {
        password.type = 'password';
        toggle.textContent = 'Show';
      }
    }


    //
    // FAST CHEAP GOOD
    //
    // define checkboxes
    const checkboxesFastCheapGood = document.querySelectorAll('.fastcheapgood input[type="checkbox"]');
    // add event listener to all checkboxes
    checkboxesFastCheapGood.forEach(checkbox => checkbox.addEventListener('click', checkFastCheapGood));
    // define last checkbox
    var lastCheckbox;
    //
    // check if all checkboxes are checked
    //
    function checkFastCheapGood() {
      let allChecked = true;
      checkboxesFastCheapGood.forEach(checkbox => {
        if (checkbox.checked === false) {
          allChecked = false;
        }
      });
      if (allChecked) {
        lastCheckbox.checked = false;
      }
      lastCheckbox = this;
    }

    //
    // COUNTER
    //
    // define elements
    const counterBackground = document.querySelector('.counterBackground');
    const counterBackgroundWidth = document.querySelector('.counterBackgroundWidth');

    const resetButton = document.querySelector('.counterReset');
    const counterValue = document.querySelector('.counterValue');
    var counter = 0;
    counterValue.textContent = counter;
    counterBackgroundWidth.style.width = counter + '%';

    // add eventListener
    counterBackground.addEventListener('click', incrementCounter);
    resetButton.addEventListener('click', resetCounter);

    document.addEventListener("keydown", function (event) {
      if (event.key === " " || event.key === "Spacebar" || event.key === "Enter") {
        incrementCounter();
      }
      if (event.key === "r" || event.key === "R") {
        resetCounter();
      }
      if (event.key === "Backspace") {
        incrementCounter('down');
      }

    });

    //
    // increment counter
    //
    function incrementCounter(direction = 'up') {
      if (counter >= 100) {
        resetCounter();
        return;
      }
      if (direction === 'down') {
        counter--;
        if (counter <= 0) {
          counter = 0;
        }
      } else {
        if (counter < 0) {
          counter = 0;
        }
        counter++;
      }


      counterValue.textContent = counter;
      counterBackground.style.borderColor = 'var(--primary-dark)';
      setTimeout(() => {
        counterBackground.style.borderColor = 'var(--primary)';
      }, 100);
      setBackgrounWidth()
    }
    //
    // reset counter
    //
    function resetCounter() {
      let inervallTime = 1000 / counter;
      var counterInterval = setInterval(() => {
        if (counter >= 0) {
          setBackgrounWidth()
          counterValue.innerHTML = counter--;
        } else {
          clearInterval(counterInterval);
        }
        // console.log(counter)
        // TODO 
        // runs til -1 and i dont know why
        // dirty hack to fix it in incrementCounter() -> if (counter <= 0) { counter = 0; }
      }, inervallTime);
    }

    function setBackgrounWidth() {
      counterBackgroundWidth.style.width = counter + '%';
      counterBackgroundWidth.style.background = `hsl(${100 - counter}, 100%, 50%)`
    }

    //
    // COLOR SLIDER
    //
    // define inputs for color Slider
    const red = document.querySelector('input.red');
    const green = document.querySelector('input.green');
    const blue = document.querySelector('input.blue');
    const colorName = document.querySelector('.colorName');
    // define preview div
    const colorPreview = document.querySelector('.colorPreview');
    // add eventListener
    red.addEventListener('input', setColor);
    green.addEventListener('input', setColor);
    blue.addEventListener('input', setColor);
    // run on startup
    setColor()

    //
    // set color
    //
    function setColor() {
      // console.log(`${red.value}, ${green.value}, ${blue.value}`)
      colorPreview.style.background = `rgb(${red.value}, ${green.value}, ${blue.value})`;
      colorName.textContent = rgbToHex(red.value, green.value, blue.value);
      colorName.style.color = `rgb(${255 - red.value}, ${255 - green.value}, ${255 - blue.value})`;
    }

    //
    // convert rgb to hex
    //
    function rgbToHex(r, g, b) {
      const hex = (r, g, b) => '#' + [r, g, b].map(x => {
        const hex = parseInt(x).toString(16)
        return hex.length === 1 ? '0' + hex : hex
      }).join('').toUpperCase();
      return hex(r, g, b)
    }


  </script>




</body>

</html>