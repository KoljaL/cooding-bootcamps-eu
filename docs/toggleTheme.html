<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./img/favicon-dark.png" type="image/png" sizes="16x16">
  <title>Web Apps Foundation</title>
  <script>
    var dataTheme;
    dataTheme = window.localStorage.getItem('data-theme') || '';
    if (!dataTheme) {
      dataTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
    }
    document.documentElement.setAttribute('data-theme', dataTheme)
  </script>

  <!-- <link rel="stylesheet" href="./css/almostclassless.css"> -->
  <style>
    @font-face {
      font-family: Overpass-Light;
      src: url('./font/Overpass-Light.woff2') format('woff2');
    }

    @font-face {
      font-family: Overpass-Regular;
      src: url('./font/Overpass-Medium.woff2') format('woff2');
    }

    :root,
    [data-theme='light'] {
      --background-color: hsl(0, 0%, 90%);
      --background-color-emphasized: hsl(0, 0%, 80%);
      --text-color: rgb(34, 34, 34);
      --link-color: hsl(268, 75%, 44%);
      --button-text-color: hsl(0, 0%, 80%);
      --border-color: hsl(0, 0%, 13%);
      background-color: var(--background-color);
    }

    [data-theme='dark'] {
      --background-color: hsl(0, 0%, 20%);
      --background-color-emphasized: hsl(0, 0%, 15%);
      --text-color: hsl(0, 0%, 77%);
      --link-color: hsl(268, 75%, 54%);
      --button-text-color: hsl(0, 0%, 100%);
      --border-color: hsl(0, 0%, 50%);
      background-color: var(--background-color);
    }

    * {
      box-sizing: border-box;
      -ms-overflow-style: none;
      scrollbar-width: none;
      transition: color 0.5s, background-color 0.5s;
    }

    ::-webkit-scrollbar {
      display: none;
    }

    body {
      max-width: 1024px;
      margin: 0 auto;
      padding: 0 1rem;
      font-family: Overpass-Light, sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
    }

    header {
      position: sticky;
      top: 0;
      height: var(--header-height);
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: baseline;
      gap: 1rem;
      padding-inline: 1rem;
      background-color: var(--secondary-bg);
      border-bottom: 1px solid var(--border-color);
      z-index: 5;
    }

    header h1 {
      margin: .5rem 0 0;
    }

    header .icons {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: flex-end;
      gap: 1rem;
    }

    .menu {
      position: absolute;
      top: 4rem;
      right: 1rem;
      padding: .5rem;
      padding-inline: .5rem;
      margin: 0;
      z-index: 10;
      background: var(--background-color-emphasized);
      border: 1px solid var(--link-color);
      border-radius: 1rem;
      display: none;
    }

    .menu ul {
      margin-bottom: 0rem;
      padding-left: .5rem;
      font-variant: small-caps;
    }

    .menu li {
      list-style: none;
      font-size: 1.2rem;
      padding: .5rem;
      line-height: 1;
      margin-bottom: 0;
    }

    .menu a {
      white-space: nowrap;
      font-variant: normal;
      font-size: 1.2rem;

    }

    .menuWrapper::before {
      content: " ";
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='red'><path stroke-linecap='round' stroke-linejoin='round' d='M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418' /></svg>");
      background-size: cover;
      background-repeat: no-repeat;
      width: 2rem;
      height: 2rem;
      display: inline-block;
      filter: hue-rotate(268deg) saturate(40%) brightness(120%);
      position: relative;
      top: 1rem;
      cursor: pointer;
    }

    .menuWrapper:hover .menu {
      display: block;
    }

    .menuWrapper:hover::before {
      filter: hue-rotate(268deg) saturate(40%) brightness(140%);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    label {
      font-family: Overpass-Regular, sans-serif;
      color: var(--text-color);
    }

    h1 {
      font-size: min(calc(1.375rem + 1.5vw), 2.5rem);
    }

    h2 {
      font-size: min(calc(1.325rem + 0.9vw), 2rem);
    }

    h3 {
      font-size: min(calc(1.3rem + 0.6vw), 1.66rem);
      margin-top: 3rem;
      margin-bottom: 0rem;
    }

    h1,
    .browserTheme,
    .storageThemeName {
      color: var(--link-color);
    }


    button {
      background-color: var(--link-color);
      border: 1px solid var(--border-color);
      border-radius: .5rem;
      color: var(--button-text-color);
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      padding: .25rem .5rem;
    }

    a,
    a:link,
    a:visited,
    a:active,
    a:focus {
      color: var(--link-color);
      text-decoration: none;
    }

    a:hover,
    button:hover {
      filter: brightness(1.2);
    }


    input[type="checkbox"] {
      appearance: none;
      width: 1.2rem;
      height: 1.2rem;
      border-radius: 3px;
      border: 1px solid var(--border-color);
      box-shadow: inset 0 0 0 0.185rem var(--background-color);
      background: var(--background-color);
      vertical-align: text-top;
    }

    input[type="checkbox"]:checked {
      background: var(--link-color);
    }

    ul,
    ol {
      margin: 1rem 0;
      padding-left: 2rem;
    }

    ol,
    ul,
    dl {
      margin-top: 0;
      margin-bottom: 1rem;
    }


    li {
      font-size: 1rem;
      line-height: 1.5;
      margin-bottom: 1.5rem;
    }

    table {
      background-color: var(--background-color);
      border: 0;
      caption-side: bottom;
      border-collapse: collapse;
      border-spacing: 0;
      max-width: 1100px;
    }

    thead {
      border-bottom: 2px solid var(--border-color);
    }


    th {
      font-weight: var(--font-weight-bolder);
      text-align: left;
    }

    td,
    th {
      padding: 1rem 0.5rem;
      vertical-align: baseline;
    }

    code {
      background: var(--background-color-emphasized);
      border-radius: 3px;
      color: var(--text-color);
      display: inline-block;
      font-family: monospace, monospace;
      font-size: .9rem;
      padding: 0 0.25rem;
    }

    kbd {
      background: var(--background-color-emphasized);
      border-radius: 3px;
      border: 1px solid var(--border-color);
      color: var(--text-color);
      font-family: monospace, monospace;
      font-size: 0.9rem;
      padding: 0.125rem 0.25rem;
    }

    p {
      font-size: 1rem;
      line-height: 1.5;
    }

    small {
      font-size: 0.75em;
    }

    a.sourceCode {
      color: var(--link-color);
      text-decoration: none;
      font-size: 1.5rem;
    }
  </style>
</head>

<body>

  <header>
    <h1>Web Apps Foundation</h1>
    <span class="icons">
      <div class="menuWrapper">
        <ul class="menu"></ul>
      </div>
    </span>
  </header>


  <h2>Light Switch</h2>

  <p>
    In this app there are four ways to set the colors.

  <ol>
    <li>The default setting of the app.</li>
    <li>The default setting of the browser or the operating system.</li>
    <li>The individual setting by the user.<br>This setting can be saved to remain after a reload of the page.</li>
    <li>The saved setting by the user</li>
  </ol>
  A setting with a higher number overwrites the previous settings.
  </p>

  <p>
    There are two Themes aka color-modes, available: <code>light</code> and <code>dark</code>. <br>
    They have effects on the following properties:

  <ul>
    <li>
      CSS variables for some colors, defined in the <code>:root</code> selector
    </li>
    <li>
      The title of the page, the <code>&lt;title&gt;&lt;/title&gt;</code> element
    </li>
    <li>
      The favicon, defined in <code>&lt;link rel=&quot;icon&quot; ...&gt;</code> element
    </li>
  </ul>

  </p>
  <h3>Your current Settings</h3>


  <table>
    <thead>
      <tr>
        <th>Setting</th>
        <th style="width:70px">Value</th>
      </tr>
    </thead>
    <tr>
      <td>App</td>
      <td>light</td>
    </tr>
    <tr>
      <td>Browser</td>
      <td class="settingBrowser">dark</td>
    </tr>
    <tr>
      <td>Individual</td>
      <td class="settingIndividual">dark</td>
    </tr>
    <tr>
      <td>Saved</td>
      <td class="settingSaved">dark</td>
    </tr>
    </tr>
  </table>

  <h3>Change Settings</h3>

  <table>
    <thead>
      <tr>
        <th>Setting</th>
        <th style="width:185px">Action</th>
        <th>Description</th>
      </tr>
    </thead>
    <tr>
      <td>App</td>
      <td>none</td>
      <td>Some theme must be fallback theme</td>
    </tr>
    <tr>
      <td>Browser</td>
      <td>press <kbd>F12</kbd></td>
      <td>and change the Browser default Theme in the developer tools</td>
    </tr>
    <tr>
      <td>Individual</td>
      <td><button class="toggleTheme"></button></td>
      <td>changes the <code>data-theme</code> property in <code>&lt;html&gt;</code></td>
    </tr>
    <tr>
      <td>Saved</td>
      <td>
        <input type="checkbox" id="saveLocalStorage" name="saveLocalStorage" value="saveLocalStorage">
      </td>
      <td>
        click the checkbox to save the <code>data-theme</code> property in <code>localStorage</code><br>
        and <button onclick="reload()">reload</button> the page, to see the effect<br>
        <!-- <small>the checkbox is checked if the <code>data-theme</code> property is saved in <code>localStorage</code><br>to remove the <code>data-theme</code> property from <code>localStorage</code> uncheck the checkbox and reload the page again</small> -->
      </td>
    </tr>
    </tr>
    </thead>
  </table>

  <footer>
    <p>
      <a target="_blank" class="sourceCode" href="https://github.com/KoljaL/cooding-bootcamps-eu/blob/master/docs/toggleTheme.html">Source Code on GitHub</a>
    </p>
  </footer>


  <!-- END OF HTML -->

  <script>
    // define variables for the elements we need to manipulate
    const faviconEl = document.querySelector('link[rel="icon"]');
    const titleEl = document.querySelector('title');
    const toggleThemeButton = document.querySelector('button.toggleTheme');

    const settingBrowser = document.querySelector('.settingBrowser');
    const settingIndividual = document.querySelector('.settingIndividual');
    const settingSaved = document.querySelector('.settingSaved');
    const saveLocalStorage = document.querySelector('#saveLocalStorage');


    var dataTheme = document.documentElement.getAttribute('data-theme', dataTheme)



    //
    // define eventListener for the toggleThemeButton
    //
    toggleThemeButton.addEventListener('click', () => {
      // toggle dataTheme 
      // store localStorage
      // set the theme
      dataTheme = (dataTheme === 'light') ? 'dark' : 'light'
      // storeLocal()
      setTheme()
      setTableValues()
    });


    //
    // define eventlistner for the saveLocalStorage checkbox
    //
    saveLocalStorage.addEventListener('change', () => {
      storeLocal()
      setTableValues()
    });

    // run the functions on page load
    document.addEventListener('DOMContentLoaded', () => {
      if (window.localStorage.getItem('data-theme')) {
        saveLocalStorage.checked = true
      }
      setTheme()
      setTableValues()
    });

    //
    // store theme in localStorage (if checkbox checked) 
    // reload the page
    //
    function reload() {
      storeLocal()
      window.location.reload();
    }

    //
    // store theme in localStorage (if checkbox checked)
    //
    function storeLocal() {
      if (saveLocalStorage.checked) {
        window.localStorage.setItem('data-theme', dataTheme);
      } else {
        window.localStorage.removeItem('data-theme');
      }
    }

    //
    // Set the theme based on the data-theme attribute
    //
    function setTheme() {
      if (dataTheme === 'dark') {
        toggleThemeButton.innerText = 'Switch to Light';
        titleEl.innerText = 'Dark Mode';
        faviconEl.setAttribute('href', 'img/favicon-dark.png');
      } else {
        toggleThemeButton.innerText = 'Switch to Dark';
        titleEl.innerText = 'Light Mode';
        faviconEl.setAttribute('href', 'img/favicon-light.png');
      }
      document.documentElement.setAttribute('data-theme', dataTheme);
    }


    //
    // set the values in the table
    //
    function setTableValues() {
      settingBrowser.innerHTML = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      settingIndividual.innerHTML = dataTheme;
      settingSaved.innerHTML = window.localStorage.getItem('data-theme') || 'not set';
    }

  </script>

  <script src="./js/menu.js"></script>



</body>

</html>